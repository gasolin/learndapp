# ä½¿ç”¨solidityèªè¨€æ’°å¯«æ™ºèƒ½åˆç´„

å‰å¹¾ç« ä»‹ç´¹äº†æ™ºèƒ½åˆç´„ğŸ“’æ˜¯ä»€éº¼ï¼Œä¹Ÿæ¦‚ç•¥æè¿°äº†å¾ç·¨è­¯åˆ°éƒ¨ç½²æ™ºèƒ½åˆç´„çš„æµç¨‹ï¼Œæ¥ä¸‹ä¾†å°‡ä»‹ç´¹å¦‚ä½•ä½¿ç”¨solidityèªè¨€ä¾†å¯«æ™ºèƒ½åˆç´„ã€‚

## Solidity èªè¨€

Ethereumä¸Šçš„æ™ºèƒ½åˆç´„éœ€è¦ä½¿ç”¨`solidity`[^1]èªè¨€ä¾†æ’°å¯«ã€‚é›–ç„¶é‚„æœ‰å…¶ä»–èƒ½ç”¨ä¾†æ’°å¯«æ™ºèƒ½åˆç´„çš„èªè¨€å¦‚`Serpent`(é¡Python)ã€`lll`(é¡Fortran)ï¼Œä½†ç›®å‰çœ‹åˆ°æ‰€æœ‰å…¬é–‹çš„æ™ºèƒ½åˆç´„éƒ½æ˜¯ä½¿ç”¨solidityæ’°å¯«ã€‚

å®£å‚³ä¸Šèªªï¼Œsolidityæ˜¯ä¸€ç¨®é¡ä¼¼Javascriptçš„èªè¨€ï¼Œä½†æˆ‘è¦ºå¾—solidityé‚„æ˜¯æ¯”è¼ƒåƒJavaæˆ–Goèªè¨€ã€‚å› ç‚ºå’ŒJavascriptä¸åŒï¼Œsolidityèˆ‡Javaæˆ–GoåŒå±¬æ–¼å¼·å‹åˆ¥(Strong Typeï¼Œåœ¨å®šç¾©è®Šæ•¸æ™‚éœ€è¦æŒ‡å®šå‹åˆ¥)èªè¨€ã€åœ¨å®šç¾©å‡½å¼(function)æ™‚åŒæ¨£éœ€æŒ‡å®šå›å‚³çš„å‹åˆ¥(type)ã€åŒæ¨£ä¹Ÿéœ€è¦å…ˆç·¨è­¯æ‰èƒ½åŸ·è¡Œã€‚é€™äº›ç‰¹æ€§éƒ½æ˜¯Javascriptæ‰€ä¸å…·å‚™çš„ã€‚

åœç¹è‘—solidityçš„å„ç¨®é–‹ç™¼å·¥å…·éˆï¼Œéƒ½æ˜¯ä½¿ç”¨å±¬æ–¼Javascriptç”Ÿæ…‹ç³»çš„npmä¾†æä¾›çš„ã€‚åœ¨å¾ŒçºŒé–‹ç™¼DAppæ™‚ï¼Œèƒ½é‹ç”¨åŒä¸€å¥—å»ºæ§‹(Build)ç’°å¢ƒçš„å„ªå‹¢å°±çªé¡¯å‡ºä¾†äº†ã€‚

## é–‹ç™¼å‰çš„æº–å‚™

æœ¬æ–‡å°‡ä½¿ç”¨ç•¶å‰æœ€æ´»èºçš„æ™ºèƒ½åˆç´„é–‹ç™¼æ¡†æ¶`truffle`[^3]ç‚ºåŸºç¤ä¾†é–‹ç™¼ã€‚ç›®å‰å¤šæ•¸æ™ºèƒ½åˆç´„çš†æ¡ç”¨truffleæ¡†æ¶é–‹ç™¼ã€‚å…¶ä»–é¸æ“‡é‚„æœ‰`embark`[^4]ç­‰ã€‚

å°±åƒä¸€èˆ¬ç¶²ç«™æˆ–Appé–‹ç™¼ä¸€æ¨£ï¼Œåœ¨æä¾›å…¬é–‹æœå‹™ä¹‹å‰ï¼Œé–‹ç™¼è€…æœƒåœ¨è‡ªå·±ç”¨æ–¼å¯«ç¨‹å¼çš„é›»è…¦(åˆç¨±ä½œæœ¬æ©Ÿ)ğŸ’»æˆ–é€éæ¸¬è©¦ç¶²è·¯ğŸ•¸ä¾†æ¸¬è©¦ç¨‹å¼åŸ·è¡Œçš„æ•ˆæœï¼Œæ¸¬è©¦å®Œæˆå¾Œï¼Œæ‰æœƒéƒ¨ç½²åˆ°å…¬é–‹çš„ç¶²è·¯ä¸Šæä¾›æœå‹™ã€‚ é–‹ç™¼å€å¡Šéˆæ™ºèƒ½åˆç´„(ç¨‹å¼)çš„éç¨‹ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ç‰¹åˆ¥æ˜¯å…¬é–‹éˆä¸Šæ‰€æœ‰å¯«å…¥æˆ–è®€å–è¨ˆç®—çµæœçš„æ“ä½œéƒ½éœ€è¦çœŸé‡‘ç™½éŠ€(è™›æ“¬ä»£å¹£)ğŸ’¸ï¼Œè€Œä¸”æ ¹æ“šç¶²è·¯ç‹€æ³ï¼Œæ¯å€‹å…¬é–‹éˆä¸Šçš„æ“ä½œéƒ½éœ€è¦è¦ä¸€å°æ®µåæ‡‰æ™‚é–“(15ç§’ ~ æ•¸åˆ†é˜)ï¼Œé€™äº›ç­‰å¾…é —æµªè²»å¯¶è²´çš„é–‹ç™¼æ™‚é–“â³ã€‚ å› æ­¤åœ¨é–‹ç™¼çš„éç¨‹ä¸­ï¼Œæˆ‘å€‘å°‡ä½¿ç”¨`ganache-cli`[^9]å·¥å…·åœ¨é›»è…¦ä¸Šæ¨¡æ“¬æ™ºèƒ½åˆç´„æ‰€éœ€çš„ä¹™å¤ªåŠå€å¡Šéˆæ¸¬è©¦ç’°å¢ƒã€‚

`ganache-cli`ä¸­ä¹ŸåŒ…å«äº†Javascriptç‰ˆæœ¬çš„Ethereumè™›æ“¬æ©Ÿ(Ethereum Virtual Machine)[^7]ï¼Œå› æ­¤å¯ä»¥å®Œæ•´åœ°åŸ·è¡Œæ™ºèƒ½åˆç´„ğŸ˜‡ã€‚

æ­¤å¤–ï¼Œé–‹ç™¼å‰é‚„éœ€æº–å‚™ä¸€å€‹åˆæ‰‹çš„ç·¨è¼¯å™¨ã€‚æˆ‘ç›®å‰æ˜¯ä½¿ç”¨[Visual Studio Code](https://code.visualstudio.com)æ­é…[solidity](https://marketplace.visualstudio.com/items?itemName=JuanBlanco.solidity)æ’ä»¶ä¾†é–‹ç™¼ã€‚solidityæ’ä»¶é™¤äº†æ”¯æ´èªæ³•é«˜äº®ä¹‹å¤–ï¼Œä¹Ÿæœƒé€éSolium[^11]æª¢æŸ¥ä¸¦æç¤ºåŸºæœ¬çš„èªæ³•éŒ¯èª¤ï¼Œç›¸ç•¶æ–¹ä¾¿ã€‚å…¶ä»–ç·¨è¼¯å™¨æ‡‰è©²ä¹Ÿæœ‰é¡ä¼¼çš„æ’ä»¶å¯é¸æ“‡ã€‚

### å®‰è£æ‰€éœ€å·¥å…·

é¦–å…ˆé–‹ç™¼æ©Ÿä¸Šå¿…é ˆè£å¥½Node.jsï¼Œå†ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£æ‰€éœ€çš„å·¥å…·ï¼š

```sh
$ npm install -g truffle ganache-cli
```

### å•Ÿå‹• ganache-cli

å®‰è£å¥½å¾Œéš¨æ™‚å¯ä»¥ä½¿ç”¨`ganache-cli`[^9]å‘½ä»¤ä¾†å•Ÿå‹•ä¹™å¤ªåŠæ¸¬è©¦ç’°å¢ƒã€‚`ganache-cli`çš„å‰èº«æ˜¯`ethereumjs-testrpc`(testrpc)[^6]ã€‚å¯ä»¥åœ¨å¾ˆå¤šåœ°æ–¹çœ‹åˆ°é€™å€‹å·¥å…·ã€‚

```sh
$ ganache-cli
Ganache CLI v6.4.3 (ganache-core: 2.5.5)

Available Accounts
==================
(0) 0xc9caaa064d688aebcd38ed2a6b8331cc677e58af
(1) 0x227591bc0ad6405e1872a65be4dedf43ac9d887d
(2) 0x1d656818acfe449d000b270a40ef642e7db16756
(3) 0x6f5cc46b12b79e61decf52e22d2212aaa198eebb
(4) 0xea8037431fb895d8486d702bf45b1740f68c50e8
(5) 0x1725197577c94c318aa1d9b948a6de6c36975e19
(6) 0x641e7cdefdff32b6c829d548c8b7f09efecf28cd
(7) 0x0c7f8c8e4f1cdc9f80ae555b4af8abd4afb129bd
(8) 0x4678c54cccd849e3e8e493511f7740ffc8a63943
(9) 0xbae12ea1b761b8bee6e21c4379c0da6411206073

Private Keys
==================
(0) aede214f4da9c155d2ad27c37b6e491d51255fa8d5b123f9d325a2c098646910
(1) 47963c15c1f7153a81af4abeabefabd64ab3e1e738372301b8f5d109afb32f86
(2) 8fca5773c047cda6a88a7c8f9922282d2b52f4589395832ce547674198338251
(3) 4e164f1cdede376c4f0f6a35fe219e8084ca2134c1ef92fd6fa614a26167745f
(4) c7f88f379bd8d48e47a8b6f527d524bf5657ed9cf1f64e75c6d130e01dc8d4b9
(5) 666a5e244bc092266908f355405be2d850abe056c50b5ce7691f1f8d200f6c46
(6) 344709a8596627fb14160fa1e90ec6fd995ca13468d78f34a2d999ad30e96826
(7) 1e21bd0b40587b06a513c59217174fc960a943c219b86ada7593665a8528682b
(8) dc8f0890d08c1d2139d2102159ddea1b7d7cc6d820b6af8e0ef4df4c7509ef73
(9) 1f413b8917d3701e494c866687082f3b3aceb03fd2c949c3accb8b3d452e045b
```

å¯ä»¥çœ‹åˆ°`ganache-cli`å•Ÿå‹•å¾Œè‡ªå‹•å»ºç«‹äº†10å€‹å¸³æˆ¶\(Accounts\)ï¼Œèˆ‡æ¯å€‹å¸³æˆ¶å°æ‡‰çš„ç§é‘°\(Private Key\)ğŸ”‘ã€‚æ¯å€‹å¸³æˆ¶ä¸­éƒ½æœ‰100å€‹æ¸¬è©¦ç”¨çš„ä»¥å¤ªå¹£\(Ether\)ğŸ’µã€‚è¦æ³¨æ„`ganache-cli`åƒ…é‹è¡Œåœ¨è¨˜æ†¶é«”ä¸­ï¼Œå› æ­¤æ¯æ¬¡é‡é–‹æ™‚éƒ½æœƒå›åˆ°å…¨æ–°çš„ç‹€æ…‹ã€‚

å¦‚æœä¸ç¿’æ…£å‘½ä»¤è¡Œç•Œé¢ï¼Œä¹Ÿå¯ä»¥è©¦è©¦åŒæ¨£æ˜¯Truffleåœ˜éšŠé–‹ç™¼çš„åœ–å½¢åŒ–å€å¡Šéˆæ¸¬è©¦è»Ÿé«”`ganache`[^8]ã€‚é›–ç„¶ç•Œé¢åœ–å½¢åŒ–äº†ï¼Œä½†åŸºæœ¬çš„æ¦‚å¿µéƒ½æ˜¯ç›¸é€šçš„ã€‚


## å‡ç´štruffle

ç”±æ–¼Ethereumä»åœ¨å¿«é€Ÿç™¼å±•éšæ®µï¼Œé–‹ç™¼å·¥å…·ä¹Ÿä¸æ–·åœ°åœ¨æ›´æ–°ã€‚è¦å®‰è£æ–°ç‰ˆæœ¬çš„truffleæ™‚ï¼Œéœ€è¦å…ˆåå®‰è£å¾Œå†é‡æ–°å®‰è£ã€‚è¼¸å…¥ä»¥ä¸‹å‘½ä»¤å³å¯é‡æ–°å®‰è£truffleï¼š

```
$ npm uninstall -g truffle
$ npm install -g truffle
```

ä¸€åˆ‡æº–å‚™å°±ç·’ï¼Œæˆ‘å€‘å¯ä»¥é–‹å§‹å»ºç«‹ç¬¬ä¸€ä»½æ™ºèƒ½åˆç´„å°ˆæ¡ˆäº†ã€‚

## åƒè€ƒè³‡æ–™

* [1] Solidity http://solidity.readthedocs.io/en/latest/index.html
* [2] Solidityç·šä¸Šç·¨è¼¯å™¨ã€€https://ethereum.github.io/browser-solidity/
* [3] Truffle Framework http://truffleframework.com/
* [4] Embark Framework https://github.com/iurimatias/embark-framework
* [5] ENSä¹Ÿä½¿ç”¨Truffleæ¡†æ¶ https://github.com/ethereum/ens
* [6] https://github.com/ethereumjs/testrpc
* [7] https://github.com/ethereumjs/ethereumjs-vm
* [8] http://truffleframework.com/docs/ganache/using
* [9] https://github.com/trufflesuite/ganache-cli
